# 2.4.10 è£½é€ ç‰©_IaCæ§‹æˆ

## ç›®çš„

IaCï¼ˆInfrastructure as Codeï¼‰ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®å ´æ‰€ã‚’å®šç¾©ã—ã¾ã™ã€‚

---

## ğŸ“ IaCãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

### 1. CloudFormation â­â­â­

**`infra/cloudformation/` ã«é…ç½®**:

```
infra/
â””â”€â”€ cloudformation/
    â”œâ”€â”€ 01-network.yaml      # VPC, Subnet, IGW
    â”œâ”€â”€ 02-security.yaml     # SecurityGroup, IAM
    â”œâ”€â”€ 03-database.yaml     # RDS, DynamoDB
    â”œâ”€â”€ 04-compute.yaml      # ECS, ALB
    â””â”€â”€ README.md            # ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
```

---

### 2. Terraform â­â­â­

**`infra/terraform/` ã«é…ç½®**:

```
infra/
â””â”€â”€ terraform/
    â”œâ”€â”€ modules/
    â”‚   â”œâ”€â”€ vpc/
    â”‚   â”œâ”€â”€ ecs/
    â”‚   â””â”€â”€ rds/
    â”œâ”€â”€ environments/
    â”‚   â”œâ”€â”€ dev/
    â”‚   â”œâ”€â”€ stg/
    â”‚   â””â”€â”€ prd/
    â”œâ”€â”€ backend.tf
    â””â”€â”€ README.md            # ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
```

---

### 3. ç’°å¢ƒåˆ¥è¨­å®š â­â­

**ç’°å¢ƒåˆ¥ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†é›¢**:

```
infra/
â””â”€â”€ terraform/
    â””â”€â”€ environments/
        â”œâ”€â”€ dev/
        â”‚   â”œâ”€â”€ main.tf
        â”‚   â””â”€â”€ terraform.tfvars
        â”œâ”€â”€ stg/
        â””â”€â”€ prd/
```

---

### 4. IaCç”¨README.md â­â­â­

**å¿…é ˆè¨˜è¼‰äº‹é …**:

```markdown
# ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰æ‰‹é †

## å‰ææ¡ä»¶
- AWS CLIè¨­å®šæ¸ˆã¿
- Terraform v1.5ä»¥ä¸Š

## ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### 1. dry-runï¼ˆå¿…é ˆï¼‰
\`\`\`bash
terraform plan -out=tfplan
\`\`\`

### 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èªå¾Œã«å®Ÿè¡Œ
\`\`\`bash
terraform apply tfplan
\`\`\`

## ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †
...
```

---

## âŒ Bad Example: ä¸é©åˆ‡ãªé…ç½®

```
myproject/
â”œâ”€â”€ main.tf              # âŒ ãƒ«ãƒ¼ãƒˆã«ç›´æ¥é…ç½®
â””â”€â”€ cloudformation.yaml  # âŒ ç’°å¢ƒåˆ†é›¢ãªã—
```

**å•é¡Œç‚¹**:
- ç’°å¢ƒåˆ†é›¢ã•ã‚Œã¦ã„ãªã„
- ä¿å®ˆæ€§ãŒä½ã„

---

## âœ… Good Example: é©åˆ‡ãªé…ç½®

```
myproject/
â””â”€â”€ infra/
    â”œâ”€â”€ cloudformation/  # âœ… IaCãƒ„ãƒ¼ãƒ«åˆ¥ã«åˆ†é›¢
    â””â”€â”€ terraform/
        â”œâ”€â”€ modules/     # âœ… ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–
        â””â”€â”€ environments/ # âœ… ç’°å¢ƒåˆ†é›¢
```

**æ”¹å–„ç‚¹**:
- âœ… ç’°å¢ƒåˆ†é›¢
- âœ… ä¿å®ˆæ€§ãŒé«˜ã„
- âœ… å†åˆ©ç”¨æ€§ãŒé«˜ã„

---

**ä½œæˆæ—¥**: 2025-10-19
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: å®Ÿè£…
**é‡è¦åº¦**: â­â­â­ å¿…é ˆ
