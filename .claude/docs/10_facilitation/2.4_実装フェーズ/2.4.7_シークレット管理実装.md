# 2.4.7 ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†å®Ÿè£…

## ç›®çš„

ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæƒ…å ±ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€APIã‚­ãƒ¼ç­‰ï¼‰ã‚’å®‰å…¨ã«ç®¡ç†ã—ã¾ã™ã€‚

---

## ğŸ” ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ã®åŸå‰‡

### 1. ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢ â­â­â­æœ€é‡è¦

**ç¦æ­¢äº‹é …**:
- âŒ ã‚³ãƒ¼ãƒ‰å†…ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
- âŒ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Gitç®¡ç†
- âŒ å¹³æ–‡ã§ã®ä¿å­˜

---

## âœ… ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. AWS Secrets Manager â­â­â­æ¨å¥¨

**Pythonä¾‹**:

```python
import boto3
import json

def get_secret(secret_name):
    client = boto3.client('secretsmanager', region_name='ap-northeast-1')
    response = client.get_secret_value(SecretId=secret_name)
    return json.loads(response['SecretString'])

# ä½¿ç”¨ä¾‹
db_credentials = get_secret('myapp/database')
db_password = db_credentials['password']
```

**TypeScriptä¾‹**:

```typescript
import { SecretsManagerClient, GetSecretValueCommand } from "@aws-sdk/client-secrets-manager";

async function getSecret(secretName: string): Promise<string> {
  const client = new SecretsManagerClient({ region: "ap-northeast-1" });
  const response = await client.send(new GetSecretValueCommand({ SecretId: secretName }));
  return response.SecretString!;
}

// ä½¿ç”¨ä¾‹
const dbPassword = await getSecret("myapp/database/password");
```

---

### 2. ç’°å¢ƒå¤‰æ•° â­â­

**.env.example**:

```bash
# .env.exampleï¼ˆGitç®¡ç†OKï¼‰
DATABASE_URL=postgresql://user:password@localhost/db
API_KEY=your-api-key-here
```

**.gitignore**:

```
.env
.env.local
```

**ä½¿ç”¨ä¾‹ï¼ˆPythonï¼‰**:

```python
import os
from dotenv import load_dotenv

load_dotenv()

DATABASE_URL = os.getenv("DATABASE_URL")
if DATABASE_URL is None:
    raise ValueError("DATABASE_URL is not set")
```

---

### 3. Systems Manager Parameter Store â­â­

**Pythonä¾‹**:

```python
import boto3

def get_parameter(parameter_name):
    ssm = boto3.client('ssm', region_name='ap-northeast-1')
    response = ssm.get_parameter(Name=parameter_name, WithDecryption=True)
    return response['Parameter']['Value']

# ä½¿ç”¨ä¾‹
api_key = get_parameter('/myapp/api-key')
```

---

## âŒ Bad Example: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰

```python
# âŒ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
DATABASE_URL = "postgresql://user:my-secret-password@localhost/db"

# âŒ APIã‚­ãƒ¼ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
API_KEY = "sk-1234567890abcdef"
```

**å•é¡Œç‚¹**:
- Gitã«ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹
- ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒæ¼æ´©
- å¤‰æ›´ãŒå›°é›£

---

## âœ… Good Example: Secrets Manager

```python
# âœ… Secrets Managerã‹ã‚‰å–å¾—
import boto3
import json

def get_db_credentials():
    client = boto3.client('secretsmanager')
    response = client.get_secret_value(SecretId='myapp/database')
    return json.loads(response['SecretString'])

credentials = get_db_credentials()
DATABASE_URL = f"postgresql://{credentials['username']}:{credentials['password']}@{credentials['host']}/myapp"
```

**æ”¹å–„ç‚¹**:
- âœ… Gitã«ã‚³ãƒŸãƒƒãƒˆã•ã‚Œãªã„
- âœ… ä¸­å¤®ç®¡ç†
- âœ… ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½

---

## ğŸ“ ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

1. [ ] ã‚³ãƒ¼ãƒ‰å†…ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæƒ…å ±ãŒãªã„ã‹ç¢ºèª
2. [ ] `.env` ãƒ•ã‚¡ã‚¤ãƒ«ãŒ `.gitignore` ã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹
3. [ ] `.env.example` ã‚’æä¾›ã—ã¦ã„ã‚‹ã‹
4. [ ] æœ¬ç•ªç’°å¢ƒã§ã¯ Secrets Manager ã¾ãŸã¯ Parameter Store ã‚’ä½¿ç”¨
5. [ ] ãƒ­ã‚°ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæƒ…å ±ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèª

---

**ä½œæˆæ—¥**: 2025-10-19
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: å®Ÿè£…
**é‡è¦åº¦**: â­â­â­ å¿…é ˆ
