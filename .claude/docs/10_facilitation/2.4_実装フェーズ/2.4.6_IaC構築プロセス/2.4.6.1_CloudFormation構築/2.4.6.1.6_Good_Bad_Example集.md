# 2.4.6.1.6 CloudFormation Good_Bad_Exampleé›†

## ç›®çš„

CloudFormationã®ã‚ˆãã‚ã‚‹é–“é•ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¤ºã—ã¾ã™ã€‚

---

## ğŸ”„ å®Ÿä¾‹ãƒ‘ã‚¿ãƒ¼ãƒ³é›†

### 1. dry-run

#### âŒ Bad Example

```bash
# âŒ æœ¬ç•ªç’°å¢ƒã«ç›´æ¥ãƒ‡ãƒ—ãƒ­ã‚¤
aws cloudformation deploy \
  --stack-name myapp-prod \
  --template-file template.yaml
```

#### âœ… Good Example

```bash
# âœ… Change Setsã§äº‹å‰ç¢ºèª
aws cloudformation create-change-set \
  --stack-name myapp-prod \
  --template-body file://template.yaml \
  --change-set-name update-check
```

---

### 2. ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†

#### âŒ Bad Example

```yaml
# âŒ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
Parameters:
  DBPassword:
    Type: String
    Default: "my-secret-password"  # âŒ å±é™º
```

#### âœ… Good Example

```yaml
# âœ… Secrets Manager ã‹ã‚‰å–å¾—
Resources:
  DBSecret:
    Type: AWS::SecretsManager::Secret
    Properties:
      GenerateSecretString:
        SecretStringTemplate: '{"username": "admin"}'
        GenerateStringKey: "password"
```

---

### 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—

#### âŒ Bad Example

```yaml
# âŒ å…¨é–‹æ”¾
SecurityGroupIngress:
  - IpProtocol: tcp
    FromPort: 0
    ToPort: 65535
    CidrIp: 0.0.0.0/0  # âŒ å±é™º
```

#### âœ… Good Example

```yaml
# âœ… å¿…è¦æœ€å°é™ã®ãƒãƒ¼ãƒˆé–‹æ”¾
SecurityGroupIngress:
  - IpProtocol: tcp
    FromPort: 443
    ToPort: 443
    CidrIp: 10.0.0.0/16  # âœ… VPCå†…ã®ã¿
```

---

## ğŸ“ ã¾ã¨ã‚

### å¿…ãšå®ˆã‚‹ã¹ãã“ã¨ â­â­â­

1. **dry-runå¿…é ˆ**: Change Setsã§äº‹å‰ç¢ºèª
2. **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†**: Secrets Managerä½¿ç”¨
3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: æœ€å°æ¨©é™ã€ãƒãƒ¼ãƒˆåˆ¶é™

---

**ä½œæˆæ—¥**: 2025-10-19
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: å®Ÿè£…
**é‡è¦åº¦**: â­â­â­ å¿…é ˆ
