# 2.4.6.2.6 Terraform Good_Bad_Exampleé›†

## ç›®çš„

Terraformã®ã‚ˆãã‚ã‚‹é–“é•ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¤ºã—ã¾ã™ã€‚

---

## ğŸ”„ å®Ÿä¾‹ãƒ‘ã‚¿ãƒ¼ãƒ³é›†

### 1. terraform plan

#### âŒ Bad Example

```bash
# âŒ planãªã—ã§ç›´æ¥apply
terraform apply -auto-approve
```

#### âœ… Good Example

```bash
# âœ… planã§äº‹å‰ç¢ºèª
terraform plan -out=tfplan
terraform apply tfplan
```

---

### 2. ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†

#### âŒ Bad Example

```hcl
# âŒ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
variable "db_password" {
  default = "my-secret-password"  # âŒ å±é™º
}
```

#### âœ… Good Example

```hcl
# âœ… Secrets Managerã‹ã‚‰å–å¾—
data "aws_secretsmanager_secret_version" "db_password" {
  secret_id = "myapp/db/password"
}

resource "aws_db_instance" "main" {
  password = data.aws_secretsmanager_secret_version.db_password.secret_string
}
```

---

### 3. Stateç®¡ç†

#### âŒ Bad Example

```hcl
# âŒ ãƒ­ãƒ¼ã‚«ãƒ«ã«Stateã‚’ä¿å­˜
# backendè¨­å®šãªã—
```

#### âœ… Good Example

```hcl
# âœ… S3 + DynamoDBã§Stateç®¡ç†
terraform {
  backend "s3" {
    bucket         = "myapp-terraform-state"
    key            = "terraform.tfstate"
    region         = "ap-northeast-1"
    encrypt        = true
    dynamodb_table = "terraform-state-lock"
  }
}
```

---

## ğŸ“ ã¾ã¨ã‚

### å¿…ãšå®ˆã‚‹ã¹ãã“ã¨ â­â­â­

1. **terraform planå¿…é ˆ**: äº‹å‰ç¢ºèª
2. **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†**: Secrets Managerä½¿ç”¨
3. **Stateç®¡ç†**: S3 + DynamoDB

---

**ä½œæˆæ—¥**: 2025-10-19
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: å®Ÿè£…
**é‡è¦åº¦**: â­â­â­ å¿…é ˆ
