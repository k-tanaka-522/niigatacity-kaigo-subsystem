# 2.4.5.1.1 PythonæŠ€è¡“æ¨™æº–å‚ç…§æ‰‹é †

## ç›®çš„

Pythonå®Ÿè£…å‰ã« `.claude/docs/40_standards/41_python.md` ã‚’å‚ç…§ã—ã€æŠ€è¡“æ¨™æº–ã«æº–æ‹ ã—ãŸã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’è¡Œã„ã¾ã™ã€‚

---

## ğŸ“š å‚ç…§æ‰‹é †ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TB
    A[Pythonå®Ÿè£…ãŒå¿…è¦ã¨åˆ¤æ˜] --> B[`.claude/docs/40_standards/41_python.md` ã‚’é–‹ã]
    B --> C[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª]
    C --> D[ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª]
    D --> E[ãƒ†ã‚¹ãƒˆè¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª]
    E --> F[Good/Bad Exampleç¢ºèª]
    F --> G[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èª¬æ˜]
    G --> H[æ‰¿èªã‚’å¾—ã‚‹]
    H --> I[ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ]

    style B fill:#fff3cd
    style F fill:#fff3cd
    style H fill:#d4edda
```

---

## âœ… ç¢ºèªã™ã¹ãã‚»ã‚¯ã‚·ãƒ§ãƒ³

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆï¼ˆå¿…é ˆï¼‰ â­â­â­

`.claude/docs/40_standards/41_python.md` ã®ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

```markdown
src/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ main.py
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ routes.py
â”‚   â””â”€â”€ dependencies.py
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ user.py
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ user_service.py
â””â”€â”€ utils/
    â”œâ”€â”€ __init__.py
    â””â”€â”€ logger.py

tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ test_api/
â”‚   â””â”€â”€ test_routes.py
â””â”€â”€ test_services/
    â””â”€â”€ test_user_service.py
```

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… `src/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰
- âœ… `tests/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
- âœ… å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `__init__.py` ã‚’é…ç½®
- âœ… å±¤åˆ¥è¨­è¨ˆï¼ˆapi, models, services, utilsï¼‰

---

### 2. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ï¼ˆå¿…é ˆï¼‰ â­â­â­

`.claude/docs/40_standards/41_python.md` ã®ã€Œã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… å‹ãƒ’ãƒ³ãƒˆï¼ˆType Hintsï¼‰ã®ä½¿ç”¨
- âœ… docstring ã®è¨˜è¿°æ–¹æ³•ï¼ˆGoogle Styleï¼‰
- âœ… å‘½åè¦å‰‡ï¼ˆsnake_case, PascalCaseï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³
- âœ… ãƒ­ã‚°å‡ºåŠ›ãƒ‘ã‚¿ãƒ¼ãƒ³

---

### 3. ãƒ†ã‚¹ãƒˆè¦ç´„ï¼ˆå¿…é ˆï¼‰ â­â­â­

`.claude/docs/40_standards/41_python.md` ã®ã€Œãƒ†ã‚¹ãƒˆè¦ç´„ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… pytest ã®ä½¿ç”¨
- âœ… ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å‘½åè¦å‰‡ï¼ˆ`test_*.py`ï¼‰
- âœ… ãƒ¢ãƒƒã‚­ãƒ³ã‚°ï¼ˆ`unittest.mock`ï¼‰
- âœ… ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ï¼ˆ80%ä»¥ä¸Šï¼‰

---

### 4. Good/Bad Exampleç¢ºèªï¼ˆé‡è¦ï¼‰ â­â­

`.claude/docs/40_standards/41_python.md` ã®ã€ŒGood/Bad Exampleã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… ã‚ˆãã‚ã‚‹é–“é•ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠŠæ¡
- âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠŠæ¡
- âœ… åŒã˜é–“é•ã„ã‚’ç¹°ã‚Šè¿”ã•ãªã„

---

## ğŸ—£ï¸ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®èª¬æ˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå‰ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èª¬æ˜ã—ã¦ãã ã•ã„ï¼š

```
ã“ã‚Œã‹ã‚‰Pythonã§â—‹â—‹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã€‘
`.claude/docs/40_standards/41_python.md` ã«æº–æ‹ ã—ã¦ã€ä»¥ä¸‹ã®æ§‹æˆã§å®Ÿè£…ã—ã¾ã™ï¼š
- src/api/ - APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- src/services/ - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- src/models/ - ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
- tests/ - ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€‘
- å‹ãƒ’ãƒ³ãƒˆï¼ˆType Hintsï¼‰ã‚’å…¨é–¢æ•°ã«é©ç”¨
- docstringï¼ˆGoogle Styleï¼‰ã‚’è¨˜è¿°
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ try-except + ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–

ã€ãƒ†ã‚¹ãƒˆã€‘
- pytest ã‚’ä½¿ç”¨
- ã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã‚’ç›®æ¨™

ã“ã®æ–¹é‡ã§å®Ÿè£…ã—ã¦ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
```

---

## âŒ Bad Example: æŠ€è¡“æ¨™æº–ã‚’å‚ç…§ã›ãšã«å®Ÿè£…

```python
# âŒ å‹ãƒ’ãƒ³ãƒˆãªã—
def get_user(user_id):
    return db.query(user_id)

# âŒ docstringãªã—
# âŒ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãªã—
```

**å•é¡Œç‚¹**:
- æŠ€è¡“æ¨™æº–ã«æº–æ‹ ã—ã¦ã„ãªã„
- å‹ãŒä¸æ˜
- ã‚¨ãƒ©ãƒ¼æ™‚ã®æŒ™å‹•ãŒä¸æ˜

---

## âœ… Good Example: æŠ€è¡“æ¨™æº–ã«æº–æ‹ ã—ã¦å®Ÿè£…

```python
from typing import Optional
from src.models.user import User
from src.utils.exceptions import UserNotFoundError

def get_user(user_id: int) -> Optional[User]:
    """
    ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã€‚

    Args:
        user_id (int): ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

    Returns:
        Optional[User]: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€‚å­˜åœ¨ã—ãªã„å ´åˆã¯None

    Raises:
        UserNotFoundError: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ
    """
    try:
        user = db.query(User).filter(User.id == user_id).first()
        if user is None:
            raise UserNotFoundError(f"User {user_id} not found")
        return user
    except Exception as e:
        logger.error(f"Failed to get user {user_id}: {e}")
        raise
```

**æ”¹å–„ç‚¹**:
- âœ… å‹ãƒ’ãƒ³ãƒˆï¼ˆ`int`, `Optional[User]`ï¼‰
- âœ… docstringï¼ˆGoogle Styleï¼‰
- âœ… ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ï¼ˆ`UserNotFoundError`ï¼‰
- âœ… ãƒ­ã‚°å‡ºåŠ›
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

---

## ğŸ”„ ç¶™ç¶šçš„ãªå‚ç…§

å®Ÿè£…ä¸­ã‚‚éšæ™‚ `.claude/docs/40_standards/41_python.md` ã‚’å‚ç…§ï¼š

1. **æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå¿…è¦ã«ãªã£ãŸæ™‚**
   - ä¾‹: éåŒæœŸå‡¦ç†ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã€å¤–éƒ¨APIé€£æº
   - æŠ€è¡“æ¨™æº–ã«ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚‹ã‹ç¢ºèª

2. **ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚**
   - æŠ€è¡“æ¨™æº–ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹ç¢ºèª
   - Good/Bad Example ã¨ç…§ã‚‰ã—åˆã‚ã›

3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è³ªå•æ™‚**
   - æŠ€è¡“æ¨™æº–ã‚’æ ¹æ‹ ã«èª¬æ˜

---

**ä½œæˆæ—¥**: 2025-10-19
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: å®Ÿè£…
**é‡è¦åº¦**: â­â­â­ å¿…é ˆ
