# 2.4.5.2.1 TypeScriptæŠ€è¡“æ¨™æº–å‚ç…§æ‰‹é †

## ç›®çš„

TypeScriptå®Ÿè£…å‰ã« `.claude/docs/40_standards/42_typescript.md` ã‚’å‚ç…§ã—ã€æŠ€è¡“æ¨™æº–ã«æº–æ‹ ã—ãŸã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’è¡Œã„ã¾ã™ã€‚

---

## ğŸ“š å‚ç…§æ‰‹é †ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TB
    A[TypeScriptå®Ÿè£…ãŒå¿…è¦ã¨åˆ¤æ˜] --> B[`.claude/docs/40_standards/42_typescript.md` ã‚’é–‹ã]
    B --> C[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª]
    C --> D[TypeScriptè¨­å®šï¼ˆtsconfig.jsonï¼‰ç¢ºèª]
    D --> E[ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª]
    E --> F[ãƒ†ã‚¹ãƒˆè¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª]
    F --> G[Good/Bad Exampleç¢ºèª]
    G --> H[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èª¬æ˜]
    H --> I[æ‰¿èªã‚’å¾—ã‚‹]
    I --> J[ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ]

    style B fill:#fff3cd
    style G fill:#fff3cd
    style I fill:#d4edda
```

---

## âœ… ç¢ºèªã™ã¹ãã‚»ã‚¯ã‚·ãƒ§ãƒ³

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆï¼ˆå¿…é ˆï¼‰ â­â­â­

`.claude/docs/40_standards/42_typescript.md` ã®ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

```markdown
src/
â”œâ”€â”€ index.ts
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ routes.ts
â”‚   â””â”€â”€ middleware.ts
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.ts
â”‚   â””â”€â”€ product.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ userService.ts
â”‚   â””â”€â”€ productService.ts
â””â”€â”€ utils/
    â”œâ”€â”€ logger.ts
    â””â”€â”€ validators.ts

tests/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ routes.test.ts
â””â”€â”€ services/
    â””â”€â”€ userService.test.ts
```

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… `src/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰
- âœ… `tests/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
- âœ… å±¤åˆ¥è¨­è¨ˆï¼ˆapi, models, services, utilsï¼‰

---

### 2. tsconfig.jsonè¨­å®šï¼ˆå¿…é ˆï¼‰ â­â­â­

`.claude/docs/40_standards/42_typescript.md` ã®ã€Œtsconfig.jsonã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… `strict: true` ã®ä½¿ç”¨
- âœ… `esModuleInterop: true`
- âœ… `skipLibCheck: true`
- âœ… `moduleResolution: "node"`

---

### 3. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ï¼ˆå¿…é ˆï¼‰ â­â­â­

`.claude/docs/40_standards/42_typescript.md` ã®ã€Œã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… å‹å®šç¾©ï¼ˆinterface, typeï¼‰ã®ä½¿ç”¨
- âœ… éåŒæœŸå‡¦ç†ï¼ˆasync/awaitï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆtry-catchï¼‰
- âœ… å‘½åè¦å‰‡ï¼ˆcamelCase, PascalCaseï¼‰

---

### 4. ãƒ†ã‚¹ãƒˆè¦ç´„ï¼ˆå¿…é ˆï¼‰ â­â­â­

`.claude/docs/40_standards/42_typescript.md` ã®ã€Œãƒ†ã‚¹ãƒˆè¦ç´„ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… Jest ã®ä½¿ç”¨
- âœ… ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å‘½åè¦å‰‡ï¼ˆ`*.test.ts`ï¼‰
- âœ… ãƒ¢ãƒƒã‚­ãƒ³ã‚°ï¼ˆ`jest.mock`ï¼‰
- âœ… ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ï¼ˆ80%ä»¥ä¸Šï¼‰

---

### 5. Good/Bad Exampleç¢ºèªï¼ˆé‡è¦ï¼‰ â­â­

`.claude/docs/40_standards/42_typescript.md` ã®ã€ŒGood/Bad Exampleã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªï¼š

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… ã‚ˆãã‚ã‚‹é–“é•ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠŠæ¡
- âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠŠæ¡
- âœ… åŒã˜é–“é•ã„ã‚’ç¹°ã‚Šè¿”ã•ãªã„

---

## ğŸ—£ï¸ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®èª¬æ˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå‰ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èª¬æ˜ã—ã¦ãã ã•ã„ï¼š

```
ã“ã‚Œã‹ã‚‰TypeScriptã§â—‹â—‹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã€‘
`.claude/docs/40_standards/42_typescript.md` ã«æº–æ‹ ã—ã¦ã€ä»¥ä¸‹ã®æ§‹æˆã§å®Ÿè£…ã—ã¾ã™ï¼š
- src/api/ - APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆExpress/Fastifyï¼‰
- src/services/ - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- src/models/ - ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆå‹å®šç¾©ï¼‰
- tests/ - ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆJestï¼‰

ã€TypeScriptè¨­å®šã€‘
- tsconfig.json: strict ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹
- ESLint + Prettier ã§é™çš„è§£æãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€‘
- interface/type ã«ã‚ˆã‚‹å‹å®šç¾©
- async/await ã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†
- try-catch ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

ã€ãƒ†ã‚¹ãƒˆã€‘
- Jest ã‚’ä½¿ç”¨
- ã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã‚’ç›®æ¨™

ã“ã®æ–¹é‡ã§å®Ÿè£…ã—ã¦ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
```

---

## âŒ Bad Example: æŠ€è¡“æ¨™æº–ã‚’å‚ç…§ã›ãšã«å®Ÿè£…

```typescript
// âŒ å‹å®šç¾©ãªã—
function getUser(userId) {
  return db.query(userId);
}

// âŒ anyå‹ã‚’ä½¿ç”¨
function processData(data: any): any {
  return data;
}
```

**å•é¡Œç‚¹**:
- æŠ€è¡“æ¨™æº–ã«æº–æ‹ ã—ã¦ã„ãªã„
- å‹ãŒä¸æ˜ï¼ˆå‹å®‰å…¨æ€§ãªã—ï¼‰
- ã‚¨ãƒ©ãƒ¼æ™‚ã®æŒ™å‹•ãŒä¸æ˜

---

## âœ… Good Example: æŠ€è¡“æ¨™æº–ã«æº–æ‹ ã—ã¦å®Ÿè£…

```typescript
interface User {
  id: number;
  name: string;
  email: string;
}

async function getUser(userId: number): Promise<User | null> {
  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã€‚
   *
   * @param userId - ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
   * @returns ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€‚å­˜åœ¨ã—ãªã„å ´åˆã¯null
   * @throws DatabaseError - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã®å ´åˆ
   */
  try {
    const user = await db.query<User>('SELECT * FROM users WHERE id = $1', [userId]);
    return user || null;
  } catch (error) {
    logger.error(`Failed to get user ${userId}:`, error);
    throw new DatabaseError(`Failed to get user ${userId}`);
  }
}
```

**æ”¹å–„ç‚¹**:
- âœ… interface ã«ã‚ˆã‚‹å‹å®šç¾©
- âœ… Promiseå‹ã®æˆ»ã‚Šå€¤
- âœ… JSDocã‚³ãƒ¡ãƒ³ãƒˆ
- âœ… ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

---

## ğŸ”„ ç¶™ç¶šçš„ãªå‚ç…§

å®Ÿè£…ä¸­ã‚‚éšæ™‚ `.claude/docs/40_standards/42_typescript.md` ã‚’å‚ç…§ï¼š

1. **æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå¿…è¦ã«ãªã£ãŸæ™‚**
   - ä¾‹: GraphQLã€WebSocketã€èªè¨¼å‡¦ç†
   - æŠ€è¡“æ¨™æº–ã«ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚‹ã‹ç¢ºèª

2. **ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚**
   - æŠ€è¡“æ¨™æº–ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹ç¢ºèª
   - Good/Bad Example ã¨ç…§ã‚‰ã—åˆã‚ã›

3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è³ªå•æ™‚**
   - æŠ€è¡“æ¨™æº–ã‚’æ ¹æ‹ ã«èª¬æ˜

---

**ä½œæˆæ—¥**: 2025-10-19
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: å®Ÿè£…
**é‡è¦åº¦**: â­â­â­ å¿…é ˆ
