# 2.4.5.2.3 tsconfig.jsonè¨­å®š

## ç›®çš„

TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®è¨­å®šã‚’ `.claude/docs/40_standards/42_typescript.md` ã«æº–æ‹ ã—ã¦è¡Œã„ã¾ã™ã€‚

---

## ğŸ“„ æ¨å¥¨tsconfig.json

```json
{
  "compilerOptions": {
    /* è¨€èªã¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« */
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],

    /* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è§£æ±º */
    "moduleResolution": "node",
    "esModuleInterop": true,
    "resolveJsonModule": true,

    /* å‡ºåŠ›è¨­å®š */
    "outDir": "./dist",
    "rootDir": "./src",
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,

    /* å‹ãƒã‚§ãƒƒã‚¯ï¼ˆæœ€é‡è¦ï¼‰ â­â­â­ */
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "strictBindCallApply": true,
    "strictPropertyInitialization": true,
    "noImplicitThis": true,
    "alwaysStrict": true,

    /* è¿½åŠ ã®ãƒã‚§ãƒƒã‚¯ */
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,

    /* ãã®ä»– */
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "allowSyntheticDefaultImports": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "tests"]
}
```

---

## âœ… é‡è¦ãªè¨­å®šé …ç›®

### 1. `strict: true` â­â­â­æœ€é‡è¦

**åŠ¹æœ**:
- ã™ã¹ã¦ã®å³æ ¼ãªå‹ãƒã‚§ãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–
- å‹å®‰å…¨æ€§ã‚’æœ€å¤§åŒ–

**ä»¥ä¸‹ã®è¨­å®šãŒè‡ªå‹•çš„ã«æœ‰åŠ¹åŒ–**:
- `noImplicitAny`
- `strictNullChecks`
- `strictFunctionTypes`
- `strictBindCallApply`
- `strictPropertyInitialization`
- `noImplicitThis`
- `alwaysStrict`

---

### 2. `moduleResolution: "node"` â­â­â­

**åŠ¹æœ**:
- Node.jsã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è§£æ±ºæ–¹æ³•ã‚’ä½¿ç”¨
- `node_modules` ã‹ã‚‰ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒæ­£ã—ãè§£æ±ºã•ã‚Œã‚‹

**ä¾‹**:

```typescript
import express from 'express';  // âœ… æ­£ã—ãè§£æ±º
```

---

### 3. `esModuleInterop: true` â­â­â­

**åŠ¹æœ**:
- CommonJSã¨ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®äº’æ›æ€§ã‚’æä¾›
- `import * as` ãªã—ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½

**ä¾‹**:

```typescript
// âŒ esModuleInterop: false
import * as express from 'express';

// âœ… esModuleInterop: true
import express from 'express';
```

---

### 4. `noImplicitAny: true` â­â­â­

**åŠ¹æœ**:
- å‹ãŒæ¨è«–ã§ããªã„å ´åˆã«ã‚¨ãƒ©ãƒ¼
- `any` ã®æš—é»™çš„ãªä½¿ç”¨ã‚’é˜²ã

**ä¾‹**:

```typescript
// âŒ noImplicitAny: true ã§ã‚¨ãƒ©ãƒ¼
function getUser(userId) {  // Error: Parameter 'userId' implicitly has an 'any' type
  return db.query(userId);
}

// âœ… å‹ã‚’æ˜ç¤º
function getUser(userId: number): Promise<User> {
  return db.query(userId);
}
```

---

### 5. `strictNullChecks: true` â­â­â­

**åŠ¹æœ**:
- `null` ã¨ `undefined` ã‚’æ˜ç¤ºçš„ã«æ‰±ã†
- Nullå‚ç…§ã‚¨ãƒ©ãƒ¼ã‚’é˜²ã

**ä¾‹**:

```typescript
// âŒ strictNullChecks: true ã§ã‚¨ãƒ©ãƒ¼
function getUser(userId: number): User {
  const user = db.query(userId);  // User | null
  return user;  // Error: Type 'null' is not assignable to type 'User'
}

// âœ… nullãƒã‚§ãƒƒã‚¯
function getUser(userId: number): User | null {
  const user = db.query(userId);
  if (!user) {
    return null;
  }
  return user;
}
```

---

### 6. `noUnusedLocals: true` â­â­

**åŠ¹æœ**:
- æœªä½¿ç”¨ã®ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã‚’æ¤œå‡º

**ä¾‹**:

```typescript
// âŒ noUnusedLocals: true ã§ã‚¨ãƒ©ãƒ¼
function processData(data: string): string {
  const unused = 'not used';  // Error: 'unused' is declared but its value is never read
  return data.toUpperCase();
}

// âœ… ä½¿ç”¨ã™ã‚‹å¤‰æ•°ã®ã¿å®£è¨€
function processData(data: string): string {
  return data.toUpperCase();
}
```

---

### 7. `skipLibCheck: true` â­æ¨å¥¨

**åŠ¹æœ**:
- `node_modules` å†…ã® `.d.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã®å‹ãƒã‚§ãƒƒã‚¯ã‚’ã‚¹ã‚­ãƒƒãƒ—
- ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’çŸ­ç¸®

**æ³¨æ„**:
- è‡ªåˆ†ã®ã‚³ãƒ¼ãƒ‰ã®å‹ãƒã‚§ãƒƒã‚¯ã«ã¯å½±éŸ¿ã—ãªã„

---

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—åˆ¥è¨­å®š

### Node.js APIã‚µãƒ¼ãƒãƒ¼

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "moduleResolution": "node",
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true
  }
}
```

---

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–‹ç™º

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "esnext",
    "lib": ["ES2020"],
    "declaration": true,
    "declarationMap": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true
  }
}
```

---

### ãƒ¢ãƒãƒ¬ãƒï¼ˆè¤‡æ•°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‰

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "composite": true,
    "declaration": true,
    "paths": {
      "@myorg/common": ["../common/src"],
      "@myorg/api": ["../api/src"]
    }
  },
  "references": [
    { "path": "../common" },
    { "path": "../api" }
  ]
}
```

---

## âŒ Bad Example: ä¸é©åˆ‡ãªè¨­å®š

```json
{
  "compilerOptions": {
    "target": "ES5",              // âŒ å¤ã„
    "strict": false,              // âŒ å‹ãƒã‚§ãƒƒã‚¯ãŒç”˜ã„
    "noImplicitAny": false,       // âŒ anyè¨±å®¹
    "skipLibCheck": false         // âŒ ãƒ“ãƒ«ãƒ‰ãŒé…ã„
  }
}
```

**å•é¡Œç‚¹**:
- å‹å®‰å…¨æ€§ãŒä½ã„
- ãƒ“ãƒ«ãƒ‰ãŒé…ã„
- ãƒã‚°ãŒæ··å…¥ã—ã‚„ã™ã„

---

## âœ… Good Example: æ¨å¥¨è¨­å®š

```json
{
  "compilerOptions": {
    "target": "ES2020",           // âœ… æœ€æ–°
    "module": "commonjs",
    "lib": ["ES2020"],
    "strict": true,               // âœ… å‹ãƒã‚§ãƒƒã‚¯å³æ ¼
    "esModuleInterop": true,      // âœ… äº’æ›æ€§
    "skipLibCheck": true,         // âœ… ãƒ“ãƒ«ãƒ‰é«˜é€ŸåŒ–
    "moduleResolution": "node",
    "outDir": "./dist",
    "rootDir": "./src",
    "declaration": true,
    "sourceMap": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "tests"]
}
```

**æ”¹å–„ç‚¹**:
- âœ… å³æ ¼ãªå‹ãƒã‚§ãƒƒã‚¯
- âœ… ãƒ“ãƒ«ãƒ‰é«˜é€ŸåŒ–
- âœ… ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è§£æ±ºãŒæ­£ç¢º

---

## ğŸ” è¨­å®šãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå‰ã«ç¢ºèªï¼š

1. [ ] `strict: true` ãŒæœ‰åŠ¹
2. [ ] `moduleResolution: "node"` ãŒè¨­å®šæ¸ˆã¿
3. [ ] `esModuleInterop: true` ãŒè¨­å®šæ¸ˆã¿
4. [ ] `skipLibCheck: true` ãŒè¨­å®šæ¸ˆã¿ï¼ˆãƒ“ãƒ«ãƒ‰é«˜é€ŸåŒ–ï¼‰
5. [ ] `outDir` ã¨ `rootDir` ãŒæ­£ã—ãè¨­å®š
6. [ ] `include` ã¨ `exclude` ãŒæ­£ã—ãè¨­å®š

---

**ä½œæˆæ—¥**: 2025-10-19
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: å®Ÿè£…
**é‡è¦åº¦**: â­â­â­ å¿…é ˆ
