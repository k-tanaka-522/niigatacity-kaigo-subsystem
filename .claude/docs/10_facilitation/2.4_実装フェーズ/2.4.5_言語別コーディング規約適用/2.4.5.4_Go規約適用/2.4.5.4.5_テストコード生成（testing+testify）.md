# 2.4.5.4.5 Goãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆtesting+testifyï¼‰

## ç›®çš„

`.claude/docs/40_standards/44_go.md` ã«æº–æ‹ ã—ãŸGoãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

---

## ğŸ§ª testingãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åŸºæœ¬

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
go get github.com/stretchr/testify
```

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

```
internal/
â””â”€â”€ service/
    â”œâ”€â”€ user_service.go
    â””â”€â”€ user_service_test.go
```

### å®Ÿè¡Œ

```bash
go test ./...
go test -cover ./...
```

---

## âœ… ãƒ†ã‚¹ãƒˆä½œæˆã®åŸå‰‡

### 1. AAA (Arrange-Act-Assert) ãƒ‘ã‚¿ãƒ¼ãƒ³ â­â­â­

```go
package service

import (
    "testing"
    "github.com/stretchr/testify/assert"
)

func TestGetUser_Success(t *testing.T) {
    // Arrange
    service := NewUserService()
    userID := 1

    // Act
    user, err := service.GetUser(userID)

    // Assert
    assert.NoError(t, err)
    assert.NotNil(t, user)
    assert.Equal(t, userID, user.ID)
}
```

---

### 2. testifyã«ã‚ˆã‚‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ â­â­â­

```go
import "github.com/stretchr/testify/assert"

func TestGetUser_NotFound(t *testing.T) {
    // Arrange
    service := NewUserService()

    // Act
    user, err := service.GetUser(999)

    // Assert
    assert.Error(t, err)
    assert.Nil(t, user)
}
```

---

### 3. Table Driven Tests â­â­

```go
func TestValidateEmail(t *testing.T) {
    tests := []struct {
        name    string
        email   string
        want    bool
    }{
        {"valid email", "test@example.com", true},
        {"invalid email", "invalid@", false},
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            got := ValidateEmail(tt.email)
            assert.Equal(t, tt.want, got)
        })
    }
}
```

---

**ä½œæˆæ—¥**: 2025-10-19
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: å®Ÿè£…
**é‡è¦åº¦**: â­â­â­ å¿…é ˆ
