# 2.5.3.1.2 ãƒ¢ãƒƒã‚­ãƒ³ã‚°ï¼ˆunittest.mockï¼‰

## ç›®çš„

å¤–éƒ¨ä¾å­˜ã‚’ãƒ¢ãƒƒã‚¯ã—ã¦ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’é«˜é€ŸåŒ–ã—ã¾ã™ã€‚

---

## ğŸ”„ ãƒ¢ãƒƒã‚­ãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³

### unittest.mock.Mock

```python
from unittest.mock import Mock, AsyncMock

# ãƒ¢ãƒƒã‚¯ã®ä½œæˆ
mock_repo = AsyncMock()
mock_repo.find_by_id.return_value = User(id=1, name="Test")

# ã‚µãƒ¼ãƒ“ã‚¹ã«ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥
service = UserService(mock_repo)
result = await service.get_user(1)

# ãƒ¢ãƒƒã‚¯ã®å‘¼ã³å‡ºã—æ¤œè¨¼
mock_repo.find_by_id.assert_called_once_with(1)
```

### @patch ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿

```python
from unittest.mock import patch

@patch('myapp.services.user_service.UserRepository')
def test_get_user(mock_repo_class):
    mock_repo = mock_repo_class.return_value
    mock_repo.find_by_id.return_value = User(id=1)

    service = UserService()
    result = service.get_user(1)

    assert result.id == 1
```

---

**ä½œæˆæ—¥**: 2025-10-19
**é‡è¦åº¦**: â­â­â­
