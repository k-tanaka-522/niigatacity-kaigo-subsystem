# 2.5.5.1 E2Eãƒ†ã‚¹ãƒˆæ–¹é‡

## ç›®çš„

ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã§ã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å‹•ä½œã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

---

## ğŸ­ E2Eãƒ†ã‚¹ãƒˆã®ç¯„å›²

### ãƒ†ã‚¹ãƒˆå¯¾è±¡

1. **Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**
   - ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œï¼ˆPlaywrightã€Cypressï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ª
   - ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆ

2. **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**
   - è¤‡æ•°APIå‘¼ã³å‡ºã—ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹
   - ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

3. **ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª**
   - Appiumç­‰ã‚’ä½¿ç”¨ã—ãŸãƒ¢ãƒã‚¤ãƒ«ãƒ†ã‚¹ãƒˆï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰

---

## ğŸ“‹ E2Eãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 1. ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã«ãŠã‘ã‚‹ä½ç½®ã¥ã‘

```
        ğŸ”º E2E (å°‘ãªã„)
       /   \
      /     \  çµ±åˆãƒ†ã‚¹ãƒˆ (ä¸­ç¨‹åº¦)
     /       \
    /_________\ å˜ä½“ãƒ†ã‚¹ãƒˆ (å¤šã„)
```

**E2Eãƒ†ã‚¹ãƒˆã¯æœ€å°é™ã«**:
- å®Ÿè¡Œã‚³ã‚¹ãƒˆãŒé«˜ã„ï¼ˆæ™‚é–“ã€ãƒªã‚½ãƒ¼ã‚¹ï¼‰
- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆãŒé«˜ã„
- é‡è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªã®ã¿ã‚’å¯¾è±¡

### 2. å¯¾è±¡ã‚·ãƒŠãƒªã‚ªã®é¸å®š

âœ… **ãƒ†ã‚¹ãƒˆã™ã¹ãã‚·ãƒŠãƒªã‚ª**:
- ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€ãƒ­ã‚°ã‚¤ãƒ³ã€æ±ºæ¸ˆç­‰ï¼‰
- è¤‡æ•°ç”»é¢ã‚’ã¾ãŸãŒã‚‹æ¥­å‹™ãƒ•ãƒ­ãƒ¼
- ä¸»è¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

âŒ **ãƒ†ã‚¹ãƒˆã—ãªã„ã‚·ãƒŠãƒªã‚ª**:
- ç´°ã‹ã„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆã§å¯¾å¿œï¼‰
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆã§å¯¾å¿œï¼‰
- ã™ã¹ã¦ã®çµ„ã¿åˆã‚ã›ï¼ˆçµ„ã¿åˆã‚ã›çˆ†ç™ºã‚’é¿ã‘ã‚‹ï¼‰

---

## ğŸ”§ ä½¿ç”¨ãƒ„ãƒ¼ãƒ«

### Playwrightï¼ˆæ¨å¥¨ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œï¼ˆChromiumã€Firefoxã€WebKitï¼‰
- âœ… è‡ªå‹•å¾…æ©Ÿæ©Ÿèƒ½
- âœ… ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ»å‹•ç”»è¨˜éŒ²
- âœ… TypeScriptå®Œå…¨ã‚µãƒãƒ¼ãƒˆ

```typescript
// playwright.config.ts
import { defineConfig } from '@playwright/test';

export default defineConfig({
  testDir: './tests/e2e',
  use: {
    baseURL: 'http://localhost:3000',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',
  },
  projects: [
    { name: 'chromium', use: { browserName: 'chromium' } },
    { name: 'firefox', use: { browserName: 'firefox' } },
  ],
});
```

### Cypressï¼ˆä»£æ›¿ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªãƒ­ãƒ¼ãƒ‰
- âœ… ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«ãƒ‡ãƒãƒƒã‚°
- âœ… ç›´æ„Ÿçš„ãªAPI

```javascript
// cypress.config.js
module.exports = {
  e2e: {
    baseUrl: 'http://localhost:3000',
    video: true,
    screenshotOnRunFailure: true,
  },
};
```

---

## ğŸ“Š å®Ÿæ–½é …ç›®

### 1. ä¸»è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ª

```typescript
// Playwright example
test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ã¾ã§ã®ãƒ•ãƒ­ãƒ¼', async ({ page }) => {
  // 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
  await page.goto('/signup');
  await page.fill('[name="email"]', 'test@example.com');
  await page.fill('[name="password"]', 'SecurePass123');
  await page.click('button[type="submit"]');

  // 2. ç™»éŒ²å®Œäº†ç¢ºèª
  await expect(page.locator('.success-message')).toContainText('ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸ');

  // 3. ãƒ­ã‚°ã‚¤ãƒ³
  await page.goto('/login');
  await page.fill('[name="email"]', 'test@example.com');
  await page.fill('[name="password"]', 'SecurePass123');
  await page.click('button[type="submit"]');

  // 4. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤ºç¢ºèª
  await expect(page).toHaveURL('/dashboard');
  await expect(page.locator('h1')).toContainText('ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰');
});
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®æ¤œè¨¼

```typescript
test('å•†å“è³¼å…¥ãƒ•ãƒ­ãƒ¼', async ({ page }) => {
  // ãƒ­ã‚°ã‚¤ãƒ³ â†’ å•†å“é¸æŠ â†’ ã‚«ãƒ¼ãƒˆè¿½åŠ  â†’ ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ â†’ æ±ºæ¸ˆ â†’ å®Œäº†
  await page.goto('/login');
  await login(page);

  await page.goto('/products/123');
  await page.click('button:has-text("ã‚«ãƒ¼ãƒˆã«è¿½åŠ ")');

  await page.goto('/cart');
  await expect(page.locator('.cart-item')).toHaveCount(1);

  await page.click('button:has-text("ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ")');
  await fillPaymentInfo(page);
  await page.click('button:has-text("è³¼å…¥ç¢ºå®š")');

  await expect(page.locator('.order-complete')).toBeVisible();
});
```

---

## ğŸ¯ ç›®æ¨™å“è³ªåŸºæº–

- âœ… ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹: 100%ã‚«ãƒãƒ¼
- âœ… ä¸»è¦ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹: 80%ä»¥ä¸Šã‚«ãƒãƒ¼
- âœ… ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆï¼ˆChromeã€Firefoxã€Safariï¼‰
- âœ… E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“: 10åˆ†ä»¥å†…ï¼ˆCIå®Ÿè¡Œæ™‚ï¼‰

---

## ğŸ”„ CI/CDçµ±åˆ

```yaml
# GitHub Actions
name: E2E Tests
on: [push, pull_request]
jobs:
  e2e:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3

      - name: Install dependencies
        run: npm ci

      - name: Install Playwright
        run: npx playwright install --with-deps

      - name: Run E2E tests
        run: npm run test:e2e

      - uses: actions/upload-artifact@v3
        if: failure()
        with:
          name: playwright-screenshots
          path: test-results/
```

---

**ä½œæˆæ—¥**: 2025-10-19
**é‡è¦åº¦**: â­â­â­
