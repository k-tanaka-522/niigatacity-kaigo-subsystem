# 2.5.8.2 ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³

## ç›®çš„

ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è„†å¼±æ€§ã‚’æ¤œå‡ºã—ã€ä¿®æ­£ã—ã¾ã™ã€‚

---

## ğŸ” ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³ãƒ„ãƒ¼ãƒ«

### Python: pip-audit

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install pip-audit

# ã‚¹ã‚­ãƒ£ãƒ³å®Ÿè¡Œ
pip-audit

# å‡ºåŠ›ä¾‹:
Found 3 known vulnerabilities in 2 packages
Name    Version  ID              Fix Versions
------  -------  --------------  ------------
urllib3 1.26.5   PYSEC-2023-74   1.26.18,2.0.7
urllib3 1.26.5   PYSEC-2023-192  1.26.17,2.0.6
requests 2.25.1  PYSEC-2023-173  2.31.0
```

**ä¿®æ­£**:

```bash
# requirements.txtã‚’æ›´æ–°
pip install --upgrade urllib3 requests
pip freeze > requirements.txt
```

---

### Node.js: npm audit

```bash
# ã‚¹ã‚­ãƒ£ãƒ³å®Ÿè¡Œ
npm audit

# å‡ºåŠ›ä¾‹:
found 5 vulnerabilities (2 moderate, 3 high)
run `npm audit fix` to fix them

# è©³ç´°è¡¨ç¤º
npm audit --json
```

**ä¿®æ­£**:

```bash
# è‡ªå‹•ä¿®æ­£ï¼ˆäº’æ›æ€§ã®ã‚ã‚‹ç¯„å›²ï¼‰
npm audit fix

# ç ´å£Šçš„å¤‰æ›´ã‚’å«ã‚€ä¿®æ­£
npm audit fix --force
```

---

### Node.js: Snyk

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g snyk

# èªè¨¼
snyk auth

# ã‚¹ã‚­ãƒ£ãƒ³
snyk test

# ä¿®æ­£
snyk fix
```

---

### Go: govulncheck

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
go install golang.org/x/vuln/cmd/govulncheck@latest

# ã‚¹ã‚­ãƒ£ãƒ³
govulncheck ./...

# å‡ºåŠ›ä¾‹:
Vulnerability #1: GO-2023-1234
  Package: golang.org/x/net/http2
  Fixed in: v0.7.0
  More info: https://pkg.go.dev/vuln/GO-2023-1234
```

**ä¿®æ­£**:

```bash
# go.modã‚’æ›´æ–°
go get golang.org/x/net@v0.7.0
go mod tidy
```

---

### C#: dotnet list package

```bash
# è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
dotnet list package --vulnerable

# å‡ºåŠ›ä¾‹:
The following sources were used:
   https://api.nuget.org/v3/index.json

Project `MyApp` has the following vulnerable packages
   [net8.0]:
   Top-level Package      Requested   Resolved   Severity   Advisory URL
   > Newtonsoft.Json      12.0.1      12.0.1     High       https://github.com/advisories/GHSA-5crp-9r3c-p9vr
```

**ä¿®æ­£**:

```bash
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ›´æ–°
dotnet add package Newtonsoft.Json --version 13.0.3
```

---

## ğŸš€ CI/CDã§ã®è‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³

### GitHub Actions (Node.js)

```yaml
name: Dependency Scan
on: [push, pull_request]

jobs:
  dependency-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm ci

      - name: Run npm audit
        run: npm audit --audit-level=high

      - name: Run Snyk
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
        with:
          args: --severity-threshold=high
```

---

### GitHub Actions (Python)

```yaml
name: Python Dependency Scan
on: [push, pull_request]

jobs:
  dependency-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install -r requirements.txt
          pip install pip-audit

      - name: Run pip-audit
        run: pip-audit
```

---

## ğŸ“Š è„†å¼±æ€§ãƒ¬ãƒãƒ¼ãƒˆç®¡ç†

### Dependabot (GitHub)

**.github/dependabot.yml**:

```yaml
version: 2
updates:
  # npm
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10

  # Python
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"

  # Docker
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "weekly"
```

**å‹•ä½œ**:
- æ¯é€±è‡ªå‹•ã§ä¾å­˜é–¢ä¿‚ã‚’ãƒã‚§ãƒƒã‚¯
- è„†å¼±æ€§ãŒè¦‹ã¤ã‹ã‚‹ã¨PRè‡ªå‹•ä½œæˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’å„ªå…ˆ

---

### Renovate Bot

**renovate.json**:

```json
{
  "extends": ["config:base"],
  "packageRules": [
    {
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true
    },
    {
      "matchPackagePatterns": ["*"],
      "matchUpdateTypes": ["major"],
      "labels": ["breaking-change"]
    }
  ],
  "vulnerabilityAlerts": {
    "labels": ["security"],
    "automerge": true
  }
}
```

---

## ğŸ¯ å¯¾å¿œãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³å®Ÿè¡Œ] --> B{è„†å¼±æ€§æ¤œå‡º?}
    B -->|No| Z[å®Œäº†]
    B -->|Yes| C[é‡è¦åº¦è©•ä¾¡]

    C --> D{Critical/High?}
    D -->|Yes| E[å³åº§ã«ä¿®æ­£ 24æ™‚é–“ä»¥å†…]
    D -->|No| F{Medium?}
    F -->|Yes| G[1é€±é–“ä»¥å†…ã«ä¿®æ­£]
    F -->|No| H[æ¬¡å›ãƒªãƒªãƒ¼ã‚¹æ™‚ã«ä¿®æ­£]

    E --> I[ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ›´æ–°]
    G --> I
    H --> I

    I --> J[ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ]
    J --> K{ãƒ†ã‚¹ãƒˆæˆåŠŸ?}
    K -->|Yes| L[PRä½œæˆãƒ»ãƒãƒ¼ã‚¸]
    K -->|No| M[æ‰‹å‹•å¯¾å¿œæ¤œè¨]

    L --> Z
    M --> Z
```

---

## âœ… ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. å®šæœŸçš„ãªã‚¹ã‚­ãƒ£ãƒ³

```bash
# æ¯é€±æœˆæ›œæ—¥ã«ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆcronï¼‰
0 9 * * 1 cd /path/to/project && npm audit || pip-audit
```

### 2. ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†

```bash
# package-lock.jsonï¼ˆNode.jsï¼‰
npm install  # âœ… package-lock.jsonãŒæ›´æ–°ã•ã‚Œã‚‹

# requirements.txtï¼ˆPythonï¼‰
pip freeze > requirements.txt  # âœ… å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³

# go.sumï¼ˆGoï¼‰
go mod tidy  # âœ… go.sumãŒæ›´æ–°ã•ã‚Œã‚‹
```

### 3. æœ€å°æ¨©é™ã®åŸå‰‡

```json
// package.json
{
  "dependencies": {
    "express": "^4.18.0"  // âœ… å¿…è¦ãªæœ€å°é™ã®ã¿
  },
  "devDependencies": {
    "jest": "^29.0.0"  // âœ… é–‹ç™ºæ™‚ã®ã¿
  }
}
```

---

**ä½œæˆæ—¥**: 2025-10-19
**é‡è¦åº¦**: â­â­â­
