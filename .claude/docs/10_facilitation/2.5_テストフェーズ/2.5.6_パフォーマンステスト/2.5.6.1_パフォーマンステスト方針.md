# 2.5.6.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆæ–¹é‡

## ç›®çš„

ã‚·ã‚¹ãƒ†ãƒ ã®æ€§èƒ½è¦ä»¶ã‚’æº€ãŸã™ã“ã¨ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

---

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã®ç¨®é¡

### 1. ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆï¼ˆLoad Testingï¼‰

**ç›®çš„**: é€šå¸¸ã®è² è·ä¸‹ã§ã®ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œç¢ºèª

**å®Ÿæ–½å†…å®¹**:
- æƒ³å®šã•ã‚Œã‚‹åŒæ™‚ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã§ã®ãƒ†ã‚¹ãƒˆ
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ æ¸¬å®š
- ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆæ¸¬å®š

**ç›®æ¨™å€¤ä¾‹**:
- åŒæ™‚ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: 1,000äºº
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ : 95%ile < 500ms
- ã‚¨ãƒ©ãƒ¼ç‡: < 0.1%

---

### 2. ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆStress Testingï¼‰

**ç›®çš„**: ã‚·ã‚¹ãƒ†ãƒ ã®é™ç•Œã‚’æŠŠæ¡

**å®Ÿæ–½å†…å®¹**:
- è² è·ã‚’æ®µéšçš„ã«å¢—åŠ 
- ã‚·ã‚¹ãƒ†ãƒ ãŒç ´ç¶»ã™ã‚‹ç‚¹ã‚’ç‰¹å®š
- ç ´ç¶»å¾Œã®å›å¾©ã‚’ç¢ºèª

**ã‚·ãƒŠãƒªã‚ª**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: 100 â†’ 500 â†’ 1,000 â†’ 2,000 â†’ 5,000
```

---

### 3. ã‚¹ãƒ‘ã‚¤ã‚¯ãƒ†ã‚¹ãƒˆï¼ˆSpike Testingï¼‰

**ç›®çš„**: æ€¥æ¿€ãªè² è·å¢—åŠ ã¸ã®å¯¾å¿œç¢ºèª

**å®Ÿæ–½å†…å®¹**:
- çŸ­æ™‚é–“ã§å¤§é‡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã®å‹•ä½œç¢ºèª
- ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°æ©Ÿèƒ½ã®ç¢ºèª

**ã‚·ãƒŠãƒªã‚ª**:
```
0â†’1,000usersï¼ˆ10ç§’ï¼‰ â†’ 0ï¼ˆ10ç§’ï¼‰ â†’ 1,000usersï¼ˆ10ç§’ï¼‰
```

---

### 4. è€ä¹…ãƒ†ã‚¹ãƒˆï¼ˆEndurance Testing / Soak Testingï¼‰

**ç›®çš„**: é•·æ™‚é–“ç¨¼åƒæ™‚ã®å®‰å®šæ€§ç¢ºèª

**å®Ÿæ–½å†…å®¹**:
- 24æ™‚é–“ä»¥ä¸Šã®é€£ç¶šå®Ÿè¡Œ
- ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯æ¤œå‡º
- ãƒªã‚½ãƒ¼ã‚¹æ¯æ¸‡ã®ç¢ºèª

---

## ğŸ”§ ä½¿ç”¨ãƒ„ãƒ¼ãƒ«

### k6ï¼ˆæ¨å¥¨ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… JavaScriptã§ã‚·ãƒŠãƒªã‚ªè¨˜è¿°
- âœ… CLIå®Ÿè¡Œã€CIçµ±åˆãŒå®¹æ˜“
- âœ… è©³ç´°ãªãƒ¡ãƒˆãƒªã‚¯ã‚¹å‡ºåŠ›

```javascript
// k6-load-test.js
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  stages: [
    { duration: '2m', target: 100 },  // Ramp-up
    { duration: '5m', target: 100 },  // Stay at 100
    { duration: '2m', target: 0 },    // Ramp-down
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'],  // 95%ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ500msä»¥å†…
    http_req_failed: ['rate<0.01'],    // ã‚¨ãƒ©ãƒ¼ç‡1%æœªæº€
  },
};

export default function () {
  const res = http.get('http://test.example.com/api/users');
  check(res, {
    'status is 200': (r) => r.status === 200,
    'response time < 500ms': (r) => r.timings.duration < 500,
  });
  sleep(1);
}
```

å®Ÿè¡Œ:
```bash
k6 run k6-load-test.js
```

---

### Locustï¼ˆä»£æ›¿ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… Pythonã§ã‚·ãƒŠãƒªã‚ªè¨˜è¿°
- âœ… Web UIã§çµæœç¢ºèª
- âœ… åˆ†æ•£å®Ÿè¡Œå¯¾å¿œ

```python
# locustfile.py
from locust import HttpUser, task, between

class WebsiteUser(HttpUser):
    wait_time = between(1, 3)

    @task(3)
    def get_users(self):
        self.client.get("/api/users")

    @task(1)
    def get_user_detail(self):
        self.client.get("/api/users/123")
```

å®Ÿè¡Œ:
```bash
locust -f locustfile.py --host=http://test.example.com
```

---

### JMeterï¼ˆä»£æ›¿ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… GUIä»˜ã
- âœ… è±Šå¯Œãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- âœ… ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½

---

## ğŸ“‹ å®Ÿæ–½é …ç›®

### 1. APIãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ

```javascript
// k6 example: GET /api/users
import http from 'k6/http';
import { check } from 'k6';

export let options = {
  vus: 1000,  // 1,000 virtual users
  duration: '5m',
};

export default function () {
  const res = http.get('http://api.example.com/users');
  check(res, {
    'is status 200': (r) => r.status === 200,
  });
}
```

### 2. DBã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

```python
# Locust example: DB-heavy endpoint
from locust import HttpUser, task

class DatabaseUser(HttpUser):
    @task
    def search_users(self):
        self.client.get("/api/users/search?q=test")  # DBæ¤œç´¢
```

### 3. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è² è·ãƒ†ã‚¹ãƒˆ

```javascript
// k6 example: File upload
import http from 'k6/http';

export default function () {
  const binFile = open('test-image.jpg', 'b');
  const data = {
    file: http.file(binFile, 'test-image.jpg'),
  };
  http.post('http://api.example.com/upload', data);
}
```

---

## ğŸ¯ ç›®æ¨™å“è³ªåŸºæº–

| é …ç›® | ç›®æ¨™å€¤ |
|------|--------|
| ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ï¼ˆ95%ileï¼‰ | < 500ms |
| ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ï¼ˆ99%ileï¼‰ | < 1,000ms |
| ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ | > 1,000 req/sec |
| ã‚¨ãƒ©ãƒ¼ç‡ | < 0.1% |
| CPUä½¿ç”¨ç‡ | < 70% |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ | < 80% |

---

**ä½œæˆæ—¥**: 2025-10-19
**é‡è¦åº¦**: â­â­â­
