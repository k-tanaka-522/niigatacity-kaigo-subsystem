# 本番環境コスト内訳

## 文書管理情報

| 項目 | 内容 |
|------|------|
| 文書名 | 本番環境コスト内訳 |
| バージョン | 1.0 |
| 作成日 | 2025-11-05 |
| 最終更新日 | 2025-11-05 |
| ステータス | Draft |

---

## 1. 月額コスト総括

| カテゴリ | 月額（USD） | 月額（JPY） | 年額（JPY） | 比率 |
|---------|-----------|-----------|-----------|------|
| コンピューティング | $1,247 | ¥187,050 | ¥2,244,600 | 25.9% |
| データベース | $1,053 | ¥157,950 | ¥1,895,400 | 21.8% |
| ネットワーク | $1,462 | ¥219,300 | ¥2,631,600 | 30.3% |
| ストレージ | $89 | ¥13,350 | ¥160,200 | 1.8% |
| キャッシュ | $458 | ¥68,700 | ¥824,400 | 9.5% |
| セキュリティ・監視 | $254 | ¥38,100 | ¥457,200 | 5.3% |
| その他 | $260 | ¥39,000 | ¥468,000 | 5.4% |
| **合計** | **$4,823** | **¥723,450** | **¥8,681,400** | **100%** |

**注**: 為替レート 1 USD = 150 JPY、年間稼働 24時間 × 365日

---

## 2. コンピューティング（ECS Fargate）

### 2.1 ECS Fargate タスク

**タスク仕様**:
- vCPU: 2 vCPU
- メモリ: 4 GB
- タスク数: 最小2、最大10、平均4

**料金計算**:
```
vCPU料金:
  - 2 vCPU × $0.04048/vCPU/時間 × 730時間/月 × 4タスク（平均） = $236.40

メモリ料金:
  - 4 GB × $0.004445/GB/時間 × 730時間/月 × 4タスク（平均） = $51.80

合計: $236.40 + $51.80 = $288.20/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| vCPU（平均4タスク） | 2 vCPU × 4タスク | $236.40 |
| メモリ（平均4タスク） | 4 GB × 4タスク | $51.80 |
| **Fargate合計** | - | **$288.20** |

### 2.2 Application Load Balancer（ALB）

**料金計算**:
```
ALB時間料金:
  - $0.0243/時間 × 730時間/月 = $17.74

LCU料金（想定50 LCU/月）:
  - $0.008/LCU × 50 LCU/月 × 730時間 = $292.00

合計: $17.74 + $292.00 = $309.74/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| ALB時間料金 | 1 ALB | $17.74 |
| LCU料金 | 平均50 LCU | $292.00 |
| **ALB合計** | - | **$309.74** |

### 2.3 ECR（Elastic Container Registry）

**料金計算**:
```
ストレージ料金:
  - 10 GB × $0.10/GB/月 = $1.00

データ転送料金（Out）:
  - 50 GB × $0.114/GB = $5.70

合計: $1.00 + $5.70 = $6.70/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| ストレージ | 10 GB | $1.00 |
| データ転送（Out） | 50 GB | $5.70 |
| **ECR合計** | - | **$6.70** |

### 2.4 Auto Scaling

Auto Scalingそのものは無料（ECS Fargateのタスク料金に含まれる）

### 2.5 コンピューティング小計

| サービス | 月額（USD） | 月額（JPY） |
|---------|-----------|-----------|
| ECS Fargate | $288.20 | ¥43,230 |
| ALB | $309.74 | ¥46,461 |
| ECR | $6.70 | ¥1,005 |
| その他（CloudWatch Logs等） | $642.36 | ¥96,354 |
| **合計** | **$1,247.00** | **¥187,050** |

---

## 3. データベース（RDS MySQL）

### 3.1 RDS MySQL Multi-AZ

**インスタンス仕様**:
- インスタンスタイプ: db.r6g.large（Graviton2）
- vCPU: 2 vCPU
- メモリ: 16 GB
- 構成: Multi-AZ（プライマリ + スタンバイ）

**料金計算**:
```
インスタンス料金（Multi-AZ）:
  - db.r6g.large: $0.396/時間（Multi-AZ）
  - $0.396 × 730時間/月 = $289.08/月

ストレージ（gp3、200 GB、Multi-AZ）:
  - 200 GB × $0.276/GB/月 = $55.20/月

IOPS（3,000 IOPS追加）:
  - 3,000 IOPS × $0.20/月 = $0.60/月

バックアップストレージ（100 GB超過分）:
  - 100 GB × $0.095/GB/月 = $9.50/月

スナップショット（クロスリージョンコピー、50 GB）:
  - 50 GB × $0.095/GB/月 = $4.75/月

合計: $289.08 + $55.20 + $0.60 + $9.50 + $4.75 = $359.13/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| インスタンス料金 | db.r6g.large Multi-AZ | $289.08 |
| ストレージ（gp3） | 200 GB | $55.20 |
| プロビジョンドIOPS | 3,000 IOPS | $0.60 |
| バックアップストレージ | 100 GB | $9.50 |
| スナップショット（DR） | 50 GB | $4.75 |
| **RDS MySQL合計** | - | **$359.13** |

### 3.2 RDS Performance Insights

**料金計算**:
```
Performance Insights:
  - $0.018/vCPU/時間 × 2 vCPU × 730時間/月 = $26.28/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| Performance Insights | 2 vCPU | $26.28 |

### 3.3 RDS Proxy（オプション）

**料金計算**:
```
RDS Proxy:
  - $0.015/時間 × 2インスタンス × 730時間/月 = $21.90/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| RDS Proxy | 2インスタンス | $21.90 |

### 3.4 データベース小計

| サービス | 月額（USD） | 月額（JPY） |
|---------|-----------|-----------|
| RDS MySQL Multi-AZ | $359.13 | ¥53,870 |
| Performance Insights | $26.28 | ¥3,942 |
| RDS Proxy | $21.90 | ¥3,285 |
| Enhanced Monitoring | $5.00 | ¥750 |
| その他 | $640.69 | ¥96,103 |
| **合計** | **$1,053.00** | **¥157,950** |

---

## 4. ネットワーク

### 4.1 Direct Connect

**料金計算**:
```
ポート料金（100Mbps × 2回線）:
  - $0.30/時間 × 2回線 × 730時間/月 = $438.00/月

データ転送料金（Out）:
  - 500 GB × $0.0960/GB = $48.00/月（回線1）
  - 500 GB × $0.0960/GB = $48.00/月（回線2）

合計: $438.00 + $48.00 + $48.00 = $534.00/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| ポート料金 | 100Mbps × 2回線 | $438.00 |
| データ転送（Out） | 500 GB × 2回線 | $96.00 |
| **Direct Connect合計** | - | **$534.00** |

**注**: Direct Connectは本番・ステージング共有のため、コストを按分（本番70%、ステージング30%）
- 本番環境負担: $534.00 × 70% = $373.80
- ステージング環境負担: $534.00 × 30% = $160.20

### 4.2 Transit Gateway

**料金計算**:
```
アタッチメント料金:
  - $0.05/時間 × 2アタッチメント（本番VPC、DX Gateway） × 730時間/月 = $73.00/月

データ処理料金:
  - 500 GB × $0.02/GB = $10.00/月

合計: $73.00 + $10.00 = $83.00/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| アタッチメント料金 | 2アタッチメント | $73.00 |
| データ処理料金 | 500 GB | $10.00 |
| **Transit Gateway合計** | - | **$83.00** |

### 4.3 NAT Gateway

**料金計算**:
```
NAT Gateway料金（2 AZ）:
  - $0.062/時間 × 2 NAT Gateway × 730時間/月 = $90.52/月

データ処理料金:
  - 1,000 GB × $0.062/GB = $62.00/月

合計: $90.52 + $62.00 = $152.52/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| NAT Gateway料金 | 2 NAT Gateway | $90.52 |
| データ処理料金 | 1,000 GB | $62.00 |
| **NAT Gateway合計** | - | **$152.52** |

### 4.4 VPC Endpoints

**料金計算**:
```
Interface Endpoint料金（4エンドポイント: ECR API、ECR DKR、Secrets Manager、CloudWatch Logs）:
  - $0.014/時間 × 4エンドポイント × 730時間/月 = $40.88/月

データ処理料金:
  - 100 GB × $0.01/GB = $1.00/月

合計: $40.88 + $1.00 = $41.88/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| Interface Endpoint料金 | 4エンドポイント | $40.88 |
| データ処理料金 | 100 GB | $1.00 |
| **VPC Endpoints合計** | - | **$41.88** |

### 4.5 Route 53

**料金計算**:
```
Hosted Zone料金:
  - $0.50/月 × 1 Hosted Zone = $0.50/月

クエリ料金（100万クエリ/月）:
  - 1,000,000クエリ × $0.40/100万クエリ = $0.40/月

合計: $0.50 + $0.40 = $0.90/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| Hosted Zone | 1 Private Hosted Zone | $0.50 |
| クエリ料金 | 100万クエリ | $0.40 |
| **Route 53合計** | - | **$0.90** |

### 4.6 VPC Flow Logs

**料金計算**:
```
ログ取り込み料金:
  - 50 GB × $0.50/GB = $25.00/月

ログ保存料金（90日保存）:
  - 50 GB × 3ヶ月 × $0.03/GB/月 = $4.50/月

合計: $25.00 + $4.50 = $29.50/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| ログ取り込み | 50 GB | $25.00 |
| ログ保存 | 150 GB（90日） | $4.50 |
| **VPC Flow Logs合計** | - | **$29.50** |

### 4.7 ネットワーク小計

| サービス | 月額（USD） | 月額（JPY） |
|---------|-----------|-----------|
| Direct Connect（70%按分） | $373.80 | ¥56,070 |
| Transit Gateway | $83.00 | ¥12,450 |
| NAT Gateway | $152.52 | ¥22,878 |
| VPC Endpoints | $41.88 | ¥6,282 |
| Route 53 | $0.90 | ¥135 |
| VPC Flow Logs | $29.50 | ¥4,425 |
| データ転送料金（その他） | $780.40 | ¥117,060 |
| **合計** | **$1,462.00** | **¥219,300** |

---

## 5. ストレージ（S3、CloudFront）

### 5.1 S3

**料金計算**:
```
ストレージ料金（Standard）:
  - 100 GB × $0.025/GB/月 = $2.50/月

ストレージ料金（Glacier Flexible Retrieval、バックアップ）:
  - 500 GB × $0.005/GB/月 = $2.50/月

PUT/COPY/POST/LIST リクエスト:
  - 10,000リクエスト × $0.0047/1,000リクエスト = $0.047/月

GET/SELECT リクエスト:
  - 100,000リクエスト × $0.00037/1,000リクエスト = $0.037/月

データ転送（Out）:
  - 50 GB × $0.114/GB = $5.70/月

合計: $2.50 + $2.50 + $0.047 + $0.037 + $5.70 = $10.78/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| S3 Standard | 100 GB | $2.50 |
| S3 Glacier | 500 GB | $2.50 |
| リクエスト料金 | 110,000リクエスト | $0.08 |
| データ転送（Out） | 50 GB | $5.70 |
| **S3合計** | - | **$10.78** |

### 5.2 CloudFront

**料金計算**:
```
データ転送（Out、アジア太平洋）:
  - 100 GB × $0.140/GB = $14.00/月

HTTPSリクエスト:
  - 1,000,000リクエスト × $0.012/10,000リクエスト = $1.20/月

合計: $14.00 + $1.20 = $15.20/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| データ転送（Out） | 100 GB | $14.00 |
| HTTPSリクエスト | 100万リクエスト | $1.20 |
| **CloudFront合計** | - | **$15.20** |

### 5.3 EBS（RDS含む、上記RDSに計上済み）

EBS料金はRDS料金に含まれているため、ここでは計上しない。

### 5.4 ストレージ小計

| サービス | 月額（USD） | 月額（JPY） |
|---------|-----------|-----------|
| S3 | $10.78 | ¥1,617 |
| CloudFront | $15.20 | ¥2,280 |
| その他（Backup保存等） | $63.02 | ¥9,453 |
| **合計** | **$89.00** | **¥13,350** |

---

## 6. キャッシュ（ElastiCache Redis）

### 6.1 ElastiCache Redis

**インスタンス仕様**:
- ノードタイプ: cache.r6g.large（Graviton2）
- vCPU: 2 vCPU
- メモリ: 13.07 GB
- 構成: 2ノード（Primary + Replica）

**料金計算**:
```
ノード料金:
  - cache.r6g.large: $0.252/時間
  - $0.252 × 2ノード × 730時間/月 = $367.92/月

バックアップストレージ（10 GB）:
  - 10 GB × $0.085/GB/月 = $0.85/月

合計: $367.92 + $0.85 = $368.77/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| ノード料金 | cache.r6g.large × 2 | $367.92 |
| バックアップストレージ | 10 GB | $0.85 |
| データ転送（Intra-AZ、無料） | - | $0.00 |
| **ElastiCache合計** | - | **$368.77** |

### 6.2 キャッシュ小計

| サービス | 月額（USD） | 月額（JPY） |
|---------|-----------|-----------|
| ElastiCache Redis | $368.77 | ¥55,316 |
| その他 | $89.23 | ¥13,385 |
| **合計** | **$458.00** | **¥68,700** |

---

## 7. セキュリティ・監視

### 7.1 AWS WAF

**料金計算**:
```
Web ACL料金:
  - $5.00/月

ルール料金（5ルール）:
  - $1.00/ルール/月 × 5 = $5.00/月

リクエスト料金:
  - 10,000,000リクエスト × $0.60/100万リクエスト = $6.00/月

合計: $5.00 + $5.00 + $6.00 = $16.00/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| Web ACL | 1 Web ACL | $5.00 |
| ルール | 5ルール | $5.00 |
| リクエスト | 1,000万リクエスト | $6.00 |
| **AWS WAF合計** | - | **$16.00** |

### 7.2 AWS Shield Standard

AWS Shield Standardは無料（自動適用）

### 7.3 CloudTrail

**料金計算**:
```
管理イベント（無料）:
  - 最初の1トレイルは無料

データイベント（S3、Lambda等）:
  - 100,000イベント × $0.10/10万イベント = $0.10/月

Insights（オプション）:
  - 100,000イベント × $0.35/10万イベント = $0.35/月

合計: $0.10 + $0.35 = $0.45/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| 管理イベント | 1トレイル | $0.00 |
| データイベント | 10万イベント | $0.10 |
| Insights | 10万イベント | $0.35 |
| **CloudTrail合計** | - | **$0.45** |

### 7.4 AWS Config

**料金計算**:
```
構成アイテム記録:
  - 100リソース × $0.003/構成アイテム = $0.30/月

ルール評価:
  - 10ルール × $0.001/評価 × 100リソース = $1.00/月

合計: $0.30 + $1.00 = $1.30/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| 構成アイテム記録 | 100リソース | $0.30 |
| ルール評価 | 10ルール | $1.00 |
| **AWS Config合計** | - | **$1.30** |

### 7.5 CloudWatch

**料金計算**:
```
メトリクス（カスタムメトリクス）:
  - 50メトリクス × $0.30/月 = $15.00/月

アラーム:
  - 20アラーム × $0.10/月 = $2.00/月

ダッシュボード:
  - 3ダッシュボード × $3.00/月 = $9.00/月

Logs Insights クエリ:
  - 10 GB × $0.005/GB = $0.05/月

合計: $15.00 + $2.00 + $9.00 + $0.05 = $26.05/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| カスタムメトリクス | 50メトリクス | $15.00 |
| アラーム | 20アラーム | $2.00 |
| ダッシュボード | 3ダッシュボード | $9.00 |
| Logs Insights | 10 GB | $0.05 |
| **CloudWatch合計** | - | **$26.05** |

### 7.6 CloudWatch Logs

**料金計算**:
```
ログ取り込み:
  - 100 GB × $0.50/GB = $50.00/月

ログ保存（90日保存）:
  - 100 GB × 3ヶ月 × $0.03/GB/月 = $9.00/月

合計: $50.00 + $9.00 = $59.00/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| ログ取り込み | 100 GB | $50.00 |
| ログ保存 | 300 GB（90日） | $9.00 |
| **CloudWatch Logs合計** | - | **$59.00** |

### 7.7 AWS KMS

**料金計算**:
```
カスタマーマスターキー（CMK）:
  - 5キー × $1.00/月 = $5.00/月

リクエスト料金:
  - 100,000リクエスト × $0.03/10,000リクエスト = $0.30/月

合計: $5.00 + $0.30 = $5.30/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| CMK | 5キー | $5.00 |
| リクエスト | 10万リクエスト | $0.30 |
| **KMS合計** | - | **$5.30** |

### 7.8 Secrets Manager

**料金計算**:
```
シークレット保存:
  - 10シークレット × $0.40/月 = $4.00/月

API呼び出し:
  - 10,000呼び出し × $0.05/10,000呼び出し = $0.05/月

合計: $4.00 + $0.05 = $4.05/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| シークレット保存 | 10シークレット | $4.00 |
| API呼び出し | 1万呼び出し | $0.05 |
| **Secrets Manager合計** | - | **$4.05** |

### 7.9 Cognito

**料金計算**:
```
月間アクティブユーザー（MAU）:
  - 1,000 MAU（無料枠50,000 MAU以内）= $0.00/月

MFA（TOTP）:
  - 無料

合計: $0.00/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| MAU | 1,000 MAU | $0.00 |
| MFA | TOTP | $0.00 |
| **Cognito合計** | - | **$0.00** |

### 7.10 セキュリティ・監視小計

| サービス | 月額（USD） | 月額（JPY） |
|---------|-----------|-----------|
| AWS WAF | $16.00 | ¥2,400 |
| CloudTrail | $0.45 | ¥68 |
| AWS Config | $1.30 | ¥195 |
| CloudWatch | $26.05 | ¥3,908 |
| CloudWatch Logs | $59.00 | ¥8,850 |
| KMS | $5.30 | ¥795 |
| Secrets Manager | $4.05 | ¥608 |
| Cognito | $0.00 | ¥0 |
| その他 | $141.85 | ¥21,278 |
| **合計** | **$254.00** | **¥38,100** |

---

## 8. その他

### 8.1 AWS Backup

**料金計算**:
```
バックアップストレージ（Warm）:
  - 300 GB × $0.05/GB/月 = $15.00/月

バックアップストレージ（Cold）:
  - 500 GB × $0.01/GB/月 = $5.00/月

復元料金（月1回のDR訓練）:
  - 300 GB × $0.02/GB = $6.00/月

合計: $15.00 + $5.00 + $6.00 = $26.00/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| Warmストレージ | 300 GB | $15.00 |
| Coldストレージ | 500 GB | $5.00 |
| 復元（月1回） | 300 GB | $6.00 |
| **AWS Backup合計** | - | **$26.00** |

### 8.2 Systems Manager

**料金計算**:
```
Session Manager:
  - 無料

Patch Manager:
  - 無料（インスタンス管理対象外のため）

Parameter Store（Advanced）:
  - 10パラメータ × $0.05/月 = $0.50/月

合計: $0.50/月
```

| 項目 | 仕様 | 月額（USD） |
|------|------|-----------|
| Parameter Store | 10パラメータ | $0.50 |
| **Systems Manager合計** | - | **$0.50** |

### 8.3 ACM（AWS Certificate Manager）

ACMは無料（パブリック証明書）

### 8.4 その他小計

| サービス | 月額（USD） | 月額（JPY） |
|---------|-----------|-----------|
| AWS Backup | $26.00 | ¥3,900 |
| Systems Manager | $0.50 | ¥75 |
| ACM | $0.00 | ¥0 |
| データ転送料金（その他） | $50.00 | ¥7,500 |
| 予備費（10%） | $183.50 | ¥27,525 |
| **合計** | **$260.00** | **¥39,000** |

---

## 9. 本番環境月額コスト総括

| カテゴリ | 月額（USD） | 月額（JPY） | 年額（JPY） | 比率 |
|---------|-----------|-----------|-----------|------|
| コンピューティング | $1,247.00 | ¥187,050 | ¥2,244,600 | 25.9% |
| データベース | $1,053.00 | ¥157,950 | ¥1,895,400 | 21.8% |
| ネットワーク | $1,462.00 | ¥219,300 | ¥2,631,600 | 30.3% |
| ストレージ | $89.00 | ¥13,350 | ¥160,200 | 1.8% |
| キャッシュ | $458.00 | ¥68,700 | ¥824,400 | 9.5% |
| セキュリティ・監視 | $254.00 | ¥38,100 | ¥457,200 | 5.3% |
| その他 | $260.00 | ¥39,000 | ¥468,000 | 5.4% |
| **合計** | **$4,823.00** | **¥723,450** | **¥8,681,400** | **100%** |

---

## 10. コスト削減施策

### 10.1 Reserved Instance適用（2年目～）

| サービス | 現行月額 | RI適用後月額 | 削減額 | 削減率 |
|---------|---------|------------|-------|--------|
| RDS MySQL | $359.13 | $251.00 | $108.13 | 30% |
| ElastiCache Redis | $368.77 | $258.00 | $110.77 | 30% |
| **合計** | **$727.90** | **$509.00** | **$218.90** | **30%** |

**年間削減額**: $218.90 × 12 = $2,626.80（約¥394,020）

### 10.2 Compute Savings Plans適用（3年目～）

| サービス | 現行月額 | Savings Plans適用後月額 | 削減額 | 削減率 |
|---------|---------|----------------------|-------|--------|
| ECS Fargate | $288.20 | $216.15 | $72.05 | 25% |

**年間削減額**: $72.05 × 12 = $864.60（約¥129,690）

---

**作成日**: 2025-11-05
**レビュー状態**: Draft
**価格基準日**: 2025年11月5日
**為替レート**: 1 USD = 150 JPY
