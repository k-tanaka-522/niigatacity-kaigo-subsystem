# コスト見積もり総括

## 文書管理情報

| 項目 | 内容 |
|------|------|
| 文書名 | コスト見積もり総括 |
| バージョン | 1.0 |
| 作成日 | 2025-11-05 |
| 最終更新日 | 2025-11-05 |
| ステータス | Draft |

---

## 1. エグゼクティブサマリー

### 1.1 月額コスト概算

| 環境 | 月額コスト（USD） | 月額コスト（JPY） | 年額コスト（JPY） |
|------|----------------|----------------|----------------|
| 本番環境 | $4,823 | ¥723,450 | ¥8,681,400 |
| ステージング環境 | $987 | ¥148,050 | ¥1,776,600 |
| **合計** | **$5,810** | **¥871,500** | **¥10,458,000** |

**注**: 為替レート 1 USD = 150 JPY で計算

### 1.2 主要コストドライバー

| サービス | 本番環境月額 | ステージング環境月額 | 合計月額 | 比率 |
|---------|------------|-------------------|---------|------|
| Direct Connect | $850 | $850 | $1,700 | 29.3% |
| ECS Fargate | $1,247 | $255 | $1,502 | 25.9% |
| RDS MySQL | $1,053 | $128 | $1,181 | 20.3% |
| NAT Gateway | $612 | $306 | $918 | 15.8% |
| ElastiCache Redis | $458 | $0 | $458 | 7.9% |
| その他 | $603 | -$552 | $51 | 0.9% |
| **合計** | **$4,823** | **$987** | **$5,810** | **100%** |

**コストドライバートップ3**:
1. **Direct Connect**: 29.3%（本番・ステージング共有のため固定費）
2. **ECS Fargate**: 25.9%（アプリケーション実行環境）
3. **RDS MySQL**: 20.3%（データベース）

---

## 2. 年間コスト推移

### 2.1 初年度コスト（構築費含む）

| 項目 | 金額（JPY） | 備考 |
|------|-----------|------|
| 初期構築費（1回） | ¥5,000,000 | CloudFormation開発、設定、テスト |
| 年間運用費 | ¥10,458,000 | 月額 ¥871,500 × 12ヶ月 |
| **初年度合計** | **¥15,458,000** | - |

### 2.2 2年目以降（運用費のみ）

| 年度 | 運用費（JPY） | コスト最適化施策 | 削減後コスト（JPY） |
|------|-------------|----------------|------------------|
| 2年目 | ¥10,458,000 | Reserved Instance適用（RDS、ElastiCache） | ¥9,200,000（12%削減） |
| 3年目 | ¥10,458,000 | Compute Savings Plans適用（ECS Fargate） | ¥8,500,000（19%削減） |
| 4年目以降 | ¥10,458,000 | 継続最適化 | ¥8,000,000（23%削減） |

---

## 3. コスト削減施策

### 3.1 短期施策（1年目～2年目）

| 施策 | 削減額（年間） | 実施時期 | 難易度 |
|------|--------------|---------|--------|
| RDS Reserved Instance（1年契約） | ¥150,000 | 6ヶ月後 | 低 |
| ElastiCache Reserved Instance（1年契約） | ¥70,000 | 6ヶ月後 | 低 |
| ステージング環境の夜間・休日停止 | ¥250,000 | 3ヶ月後 | 中 |
| S3ライフサイクルポリシー最適化 | ¥30,000 | 即時 | 低 |
| **合計** | **¥500,000** | - | - |

### 3.2 中期施策（2年目～3年目）

| 施策 | 削減額（年間） | 実施時期 | 難易度 |
|------|--------------|---------|--------|
| ECS Fargate Compute Savings Plans（1年契約） | ¥400,000 | 1年後 | 中 |
| RDS Reserved Instance（3年契約） | ¥300,000 | 1年後 | 低 |
| NAT Gateway削減（S3 Gateway Endpoint活用） | ¥150,000 | 1.5年後 | 高 |
| **合計** | **¥850,000** | - | - |

### 3.3 長期施策（3年目以降）

| 施策 | 削減額（年間） | 実施時期 | 難易度 |
|------|--------------|---------|--------|
| Direct Connect帯域削減（100Mbps → 50Mbps） | ¥200,000 | 3年後 | 高 |
| Aurora Serverless v2への移行 | ¥250,000 | 3年後 | 高 |
| Lambda移行（バッチ処理等） | ¥100,000 | 3年後 | 高 |
| **合計** | **¥550,000** | - | - |

---

## 4. コスト最適化ロードマップ

### 4.1 タイムライン

```
年度    | 施策                                    | 削減額（累計）
--------|---------------------------------------|---------------
1年目   | 基本構築、運用開始                       | ¥0
        | ステージング夜間停止                     | ¥250,000
        | S3ライフサイクル最適化                   | ¥30,000
--------|---------------------------------------|---------------
2年目   | RDS RI（1年）                          | ¥150,000
        | ElastiCache RI（1年）                  | ¥70,000
        | Fargate Savings Plans（1年）           | ¥400,000
        | **2年目累計削減額**                     | **¥900,000**
--------|---------------------------------------|---------------
3年目   | RDS RI（3年）                          | ¥300,000
        | NAT Gateway削減                       | ¥150,000
        | **3年目累計削減額**                     | **¥1,350,000**
--------|---------------------------------------|---------------
4年目   | Direct Connect帯域削減                 | ¥200,000
        | Aurora Serverless v2移行              | ¥250,000
        | Lambda移行                            | ¥100,000
        | **4年目累計削減額**                     | **¥1,900,000**
```

### 4.2 5年間総コスト

| 年度 | 初期構築費 | 運用費 | 削減額 | 実コスト | 累計コスト |
|------|----------|-------|-------|---------|----------|
| 1年目 | ¥5,000,000 | ¥10,458,000 | -¥280,000 | ¥15,178,000 | ¥15,178,000 |
| 2年目 | ¥0 | ¥10,458,000 | -¥900,000 | ¥9,558,000 | ¥24,736,000 |
| 3年目 | ¥0 | ¥10,458,000 | -¥1,350,000 | ¥9,108,000 | ¥33,844,000 |
| 4年目 | ¥0 | ¥10,458,000 | -¥1,900,000 | ¥8,558,000 | ¥42,402,000 |
| 5年目 | ¥0 | ¥10,458,000 | -¥1,900,000 | ¥8,558,000 | ¥50,960,000 |

**5年間総コスト**: **¥50,960,000**（初期構築費込み）

---

## 5. 費用対効果分析

### 5.1 既存システム（オンプレミス）との比較

| 項目 | オンプレミス（推定） | AWS（5年間） | 差額 |
|------|------------------|------------|------|
| 初期構築費 | ¥15,000,000 | ¥5,000,000 | -¥10,000,000 |
| サーバー購入費 | ¥8,000,000 | ¥0 | -¥8,000,000 |
| ネットワーク機器 | ¥3,000,000 | ¥0 | -¥3,000,000 |
| 運用費（5年） | ¥20,000,000 | ¥45,960,000 | +¥25,960,000 |
| 電気代（5年） | ¥2,000,000 | ¥0 | -¥2,000,000 |
| 保守費（5年） | ¥10,000,000 | ¥0 | -¥10,000,000 |
| **合計** | **¥58,000,000** | **¥50,960,000** | **-¥7,040,000** |

**結論**: AWS移行により5年間で約¥7,040,000（12%）のコスト削減が見込まれる

### 5.2 非金銭的メリット

| メリット | 効果 |
|---------|------|
| スケーラビリティ | 利用者増加に柔軟に対応可能 |
| 高可用性 | Multi-AZ構成で99.0%以上の稼働率 |
| セキュリティ | GCAS準拠、AWS標準セキュリティサービス利用 |
| DR対策 | 大阪リージョンへの自動バックアップ |
| 運用負荷軽減 | マネージドサービス活用で運用工数削減 |

---

## 6. リスクとコスト変動要因

### 6.1 コスト増加リスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| 利用者数増加（1,300名 → 2,000名） | +30% | Auto Scalingで段階的対応 |
| データ量増加（100GB → 500GB） | +15% | S3ライフサイクルポリシーで最適化 |
| Direct Connect帯域不足 | +50% | 利用状況監視、段階的増強 |
| 為替変動（1 USD = 150 JPY → 160 JPY） | +6.7% | 年次予算見直し |

### 6.2 コスト削減機会

| 機会 | 削減率 | 実現性 |
|------|-------|--------|
| AWS Savings Plans適用 | -15% | 高 |
| Reserved Instance適用 | -30%（対象リソースのみ） | 高 |
| Spot Instance活用（開発環境） | -70%（対象リソースのみ） | 中 |
| Graviton2インスタンス移行 | -20% | 中 |

---

## 7. 予算管理

### 7.1 AWS Budgets設定

```yaml
MonthlyBudget:
  BudgetName: niigata-kaigo-monthly-budget
  BudgetType: COST
  BudgetLimit:
    Amount: 6500
    Unit: USD
  TimeUnit: MONTHLY
  CostTypes:
    IncludeTax: true
    IncludeSubscription: true
    UseBlended: false
  NotificationWithSubscribers:
    - Notification:
        NotificationType: ACTUAL
        ComparisonOperator: GREATER_THAN
        Threshold: 80
      Subscribers:
        - SubscriptionType: EMAIL
          Address: admin@niigata-city.jp
    - Notification:
        NotificationType: ACTUAL
        ComparisonOperator: GREATER_THAN
        Threshold: 100
      Subscribers:
        - SubscriptionType: EMAIL
          Address: manager@niigata-city.jp
        - SubscriptionType: SNS
          Address: arn:aws:sns:ap-northeast-1:123456789012:budget-alert
```

### 7.2 コストアロケーションタグ

| タグキー | タグ値例 | 用途 |
|---------|---------|------|
| Environment | Production, Staging | 環境別コスト分析 |
| Project | niigata-kaigo | プロジェクト別コスト分析 |
| CostCenter | IT-Dept | 部門別コスト配分 |
| ManagedBy | CloudFormation, Manual | 管理方法別分析 |

---

## 8. 詳細コスト内訳

詳細なコスト内訳は以下のドキュメントを参照してください：

- [本番環境コスト内訳](production_cost_breakdown.md)
- [ステージング環境コスト内訳](staging_cost_breakdown.md)
- [コスト最適化計画](cost_optimization_plan.md)

---

## 9. 承認

### 9.1 コスト見積もり承認

| 役職 | 氏名 | 承認日 | 署名 |
|------|------|-------|------|
| プロジェクトマネージャー | - | 未承認 | - |
| 財務担当者 | - | 未承認 | - |
| CIO | - | 未承認 | - |

### 9.2 次のステップ

1. 本見積もりを関係者にレビュー依頼
2. AWS Pricing Calculatorで再検証
3. 予算承認取得
4. 調達手続き開始

---

**作成日**: 2025-11-05
**レビュー状態**: Draft
**価格基準日**: 2025年11月5日
**為替レート**: 1 USD = 150 JPY
